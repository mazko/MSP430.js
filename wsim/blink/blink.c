// ./wsim-wsn430 --logfile=stdout --verbose=6 --realtime --ui /home/oleg/Desktop/wsim.js/wsim/blink/msp430f1611.out

#include <msp430.h>


static void test_seq() {
    // seq 1 242 | xargs  -I {} -n1 echo P5OUT = {}\;
    P5OUT = 1;
    P5OUT = 2;
    P5OUT = 3;
    P5OUT = 4;
    P5OUT = 5;
    P5OUT = 6;
    P5OUT = 7;
    P5OUT = 8;
    P5OUT = 9;
    P5OUT = 10;
    P5OUT = 11;
    P5OUT = 12;
    P5OUT = 13;
    P5OUT = 14;
    P5OUT = 15;
    P5OUT = 16;
    P5OUT = 17;
    P5OUT = 18;
    P5OUT = 19;
    P5OUT = 20;
    P5OUT = 21;
    P5OUT = 22;
    P5OUT = 23;
    P5OUT = 24;
    P5OUT = 25;
    P5OUT = 26;
    P5OUT = 27;
    P5OUT = 28;
    P5OUT = 29;
    P5OUT = 30;
    P5OUT = 31;
    P5OUT = 32;
    P5OUT = 33;
    P5OUT = 34;
    P5OUT = 35;
    P5OUT = 36;
    P5OUT = 37;
    P5OUT = 38;
    P5OUT = 39;
    P5OUT = 40;
    P5OUT = 41;
    P5OUT = 42;
    P5OUT = 43;
    P5OUT = 44;
    P5OUT = 45;
    P5OUT = 46;
    P5OUT = 47;
    P5OUT = 48;
    P5OUT = 49;
    P5OUT = 50;
    P5OUT = 51;
    P5OUT = 52;
    P5OUT = 53;
    P5OUT = 54;
    P5OUT = 55;
    P5OUT = 56;
    P5OUT = 57;
    P5OUT = 58;
    P5OUT = 59;
    P5OUT = 60;
    P5OUT = 61;
    P5OUT = 62;
    P5OUT = 63;
    P5OUT = 64;
    P5OUT = 65;
    P5OUT = 66;
    P5OUT = 67;
    P5OUT = 68;
    P5OUT = 69;
    P5OUT = 70;
    P5OUT = 71;
    P5OUT = 72;
    P5OUT = 73;
    P5OUT = 74;
    P5OUT = 75;
    P5OUT = 76;
    P5OUT = 77;
    P5OUT = 78;
    P5OUT = 79;
    P5OUT = 80;
    P5OUT = 81;
    P5OUT = 82;
    P5OUT = 83;
    P5OUT = 84;
    P5OUT = 85;
    P5OUT = 86;
    P5OUT = 87;
    P5OUT = 88;
    P5OUT = 89;
    P5OUT = 90;
    P5OUT = 91;
    P5OUT = 92;
    P5OUT = 93;
    P5OUT = 94;
    P5OUT = 95;
    P5OUT = 96;
    P5OUT = 97;
    P5OUT = 98;
    P5OUT = 99;
    P5OUT = 100;
    P5OUT = 101;
    P5OUT = 102;
    P5OUT = 103;
    P5OUT = 104;
    P5OUT = 105;
    P5OUT = 106;
    P5OUT = 107;
    P5OUT = 108;
    P5OUT = 109;
    P5OUT = 110;
    P5OUT = 111;
    P5OUT = 112;
    P5OUT = 113;
    P5OUT = 114;
    P5OUT = 115;
    P5OUT = 116;
    P5OUT = 117;
    P5OUT = 118;
    P5OUT = 119;
    P5OUT = 120;
    P5OUT = 121;
    P5OUT = 122;
    P5OUT = 123;
    P5OUT = 124;
    P5OUT = 125;
    P5OUT = 126;
    P5OUT = 127;
    P5OUT = 128;
    P5OUT = 129;
    P5OUT = 130;
    P5OUT = 131;
    P5OUT = 132;
    P5OUT = 133;
    P5OUT = 134;
    P5OUT = 135;
    P5OUT = 136;
    P5OUT = 137;
    P5OUT = 138;
    P5OUT = 139;
    P5OUT = 140;
    P5OUT = 141;
    P5OUT = 142;
    P5OUT = 143;
    P5OUT = 144;
    P5OUT = 145;
    P5OUT = 146;
    P5OUT = 147;
    P5OUT = 148;
    P5OUT = 149;
    P5OUT = 150;
    P5OUT = 151;
    P5OUT = 152;
    P5OUT = 153;
    P5OUT = 154;
    P5OUT = 155;
    P5OUT = 156;
    P5OUT = 157;
    P5OUT = 158;
    P5OUT = 159;
    P5OUT = 160;
    P5OUT = 161;
    P5OUT = 162;
    P5OUT = 163;
    P5OUT = 164;
    P5OUT = 165;
    P5OUT = 166;
    P5OUT = 167;
    P5OUT = 168;
    P5OUT = 169;
    P5OUT = 170;
    P5OUT = 171;
    P5OUT = 172;
    P5OUT = 173;
    P5OUT = 174;
    P5OUT = 175;
    P5OUT = 176;
    P5OUT = 177;
    P5OUT = 178;
    P5OUT = 179;
    P5OUT = 180;
    P5OUT = 181;
    P5OUT = 182;
    P5OUT = 183;
    P5OUT = 184;
    P5OUT = 185;
    P5OUT = 186;
    P5OUT = 187;
    P5OUT = 188;
    P5OUT = 189;
    P5OUT = 190;
    P5OUT = 191;
    P5OUT = 192;
    P5OUT = 193;
    P5OUT = 194;
    P5OUT = 195;
    P5OUT = 196;
    P5OUT = 197;
    P5OUT = 198;
    P5OUT = 199;
    P5OUT = 200;
    P5OUT = 201;
    P5OUT = 202;
    P5OUT = 203;
    P5OUT = 204;
    P5OUT = 205;
    P5OUT = 206;
    P5OUT = 207;
    P5OUT = 208;
    P5OUT = 209;
    P5OUT = 210;
    P5OUT = 211;
    P5OUT = 212;
    P5OUT = 213;
    P5OUT = 214;
    P5OUT = 215;
    P5OUT = 216;
    P5OUT = 217;
    P5OUT = 218;
    P5OUT = 219;
    P5OUT = 220;
    P5OUT = 221;
    P5OUT = 222;
    P5OUT = 223;
    P5OUT = 224;
    P5OUT = 225;
    P5OUT = 226;
    P5OUT = 227;
    P5OUT = 228;
    P5OUT = 229;
    P5OUT = 230;
    P5OUT = 231;
    P5OUT = 232;
    P5OUT = 233;
    P5OUT = 234;
    P5OUT = 235;
    P5OUT = 236;
    P5OUT = 237;
    P5OUT = 238;
    P5OUT = 239;
    P5OUT = 240;
    P5OUT = 241;
    P5OUT = 242;
}


int main(void) {
    WDTCTL = WDTPW | WDTHOLD;               // Stop watchdog timer

    // DCO = 3, RSEL = 2, f = 0.28 MHz
    DCOCTL = /* DCO2 + */ DCO1 + DCO0; 
    BCSCTL1 = XT2OFF + RSEL1  /* + RSEL0 + RSEL2 */;

    P5DIR |= 0xFF;                          // Set P1.0 to output direction

    test_seq();

    for(;;) {
        volatile unsigned int i;            // volatile to prevent optimization

        P5OUT ^= 0xFF;                      // Toggle P1.0 using exclusive-OR

        i = 4444;                          // SW Delay
        do i--;
        while(i != 0);
    }

    return 0;
}